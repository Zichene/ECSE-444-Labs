/*
 * c_sqrt.c
 *
 *  Created on: Sep 7, 2023
 *      Author: agree
 */
#include "main.h"
#define ARM_MATH_CM4
#include "arm_math.h"
#define NUM_ITERATIONS 20
void c_sqrt(float32_t in, float32_t *pOut) {
	// initial guess x_0
	float32_t x_prev = in; // Right shift by 1 to divide by 2
	float32_t x_next;

	// iteration loops
	for (int i = 0; i < NUM_ITERATIONS; i++) {
		x_next = (x_prev*x_prev - in)/(2*x_prev);
		x_prev = x_next;
	}
	(*pOut) = x_next;
}
